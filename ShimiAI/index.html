<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shimwell AI</title>
    <link rel="stylesheet" href="style.css?v=2">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="app-container">
        <!-- Header -->
        <header class="app-header">
            <div class="header-content">
                <div class="logo-section">
                    <img src="../Assets/Images/Logo.png" alt="Shimwell AI" class="logo" style="object-fit: contain; width: 48px; height: 48px;">
                    <div class="brand">
                        <h1>Shimwell AI</h1>
                        <span class="tagline">Intelligent Test Generation</span>
                    </div>
                </div>
                <div class="header-actions">
                    <button class="btn btn-secondary" id="helpBtn" style="background: #374151; color: #e1e1e1; padding: 0.75rem 1.5rem; border: 1px solid #4b5563; border-radius: 0.5rem; font-size: 0.875rem; cursor: pointer; display: inline-flex; align-items: center; gap: 0.5rem;">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="10"></circle>
                            <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path>
                            <line x1="12" y1="17" x2="12.01" y2="17"></line>
                        </svg>
                        Help
                    </button>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Setup Screen -->
            <div id="setupScreen" class="screen active">
                <div class="setup-container">
                    <div class="setup-card">
                        <div class="card-header">
                            <h2>Create Your Test</h2>
                            <p>Generate customized tests in seconds with AI</p>
                        </div>
                        
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="subjectInput">Subject</label>
                                <input type="text" id="subjectInput" placeholder="e.g., Mathematics, Science, History">
                            </div>
                            
                            <div class="form-group">
                                <label for="gradeInput">Grade Level</label>
                                <input type="text" id="gradeInput" placeholder="e.g., Grade 5, High School, College">
                            </div>
                            
                            <div class="form-group">
                                <label for="pageCountSelect">Number of Pages</label>
                                <select id="pageCountSelect">
                                    <option value="1">1 Page (5 questions)</option>
                                    <option value="2">2 Pages (10 questions)</option>
                                    <option value="3">3 Pages (15 questions)</option>
                                    <option value="4">4 Pages (20 questions)</option>
                                    <option value="5" selected>5 Pages (25 questions)</option>
                                    <option value="6">6 Pages (30 questions)</option>
                                    <option value="7">7 Pages (35 questions)</option>
                                    <option value="8">8 Pages (40 questions)</option>
                                    <option value="9">9 Pages (45 questions)</option>
                                    <option value="10">10 Pages (50 questions)</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="action-buttons">
                            <button class="btn btn-primary btn-large" id="generateBtn" style="background: #d97706; color: white; padding: 1rem 2rem; border: none; border-radius: 0.5rem; font-size: 1rem; cursor: pointer; display: inline-flex; align-items: center; gap: 0.5rem;">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z"></path>
                                </svg>
                                Generate Test
                            </button>
                        </div>
                        
                        <div class="features">
                            <h3>Features</h3>
                            <div class="feature-grid">
                                <div class="feature-item">
                                    <div class="feature-icon">üéØ</div>
                                    <div class="feature-text">
                                        <h4>AI-Powered</h4>
                                        <p>Smart question generation</p>
                                    </div>
                                </div>
                                <div class="feature-item">
                                    <div class="feature-icon">üìä</div>
                                    <div class="feature-text">
                                        <h4>Progressive Difficulty</h4>
                                        <p>Easy to hard questions</p>
                                    </div>
                                </div>
                                <div class="feature-item">
                                    <div class="feature-icon">üé®</div>
                                    <div class="feature-text">
                                        <h4>Drawing Support</h4>
                                        <p>Add diagrams & sketches</p>
                                    </div>
                                </div>
                                <div class="feature-item">
                                    <div class="feature-icon">ü§ñ</div>
                                    <div class="feature-text">
                                        <h4>AI Assistant</h4>
                                        <p>Step-by-step hints</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Test Screen -->
            <div id="testScreen" class="screen">
                <div class="test-container">
                    <div class="test-header">
                        <div class="test-info">
                            <h1 id="testTitle">TEST TITLE</h1>
                            <div class="test-meta">
                                <span class="page-info">Page <span id="currentPage">1</span> of <span id="totalPages">5</span></span>
                                <span class="marks-info">Total Marks: <span id="totalMarks">0</span></span>
                            </div>
                        </div>
                        <div class="test-actions">
                            <button class="btn btn-secondary" id="editQuestionsBtn" style="background: #374151; color: #e1e1e1; padding: 0.75rem 1.5rem; border: 1px solid #4b5563; border-radius: 0.5rem; font-size: 0.875rem; cursor: pointer; display: inline-flex; align-items: center; gap: 0.5rem;">Edit Questions</button>
                            <button class="btn btn-secondary" id="editMarksBtn" style="background: #374151; color: #e1e1e1; padding: 0.75rem 1.5rem; border: 1px solid #4b5563; border-radius: 0.5rem; font-size: 0.875rem; cursor: pointer; display: inline-flex; align-items: center; gap: 0.5rem;">Edit Marks</button>
                            <button class="btn btn-secondary" id="saveTestBtn" style="background: #374151; color: #e1e1e1; padding: 0.75rem 1.5rem; border: 1px solid #4b5563; border-radius: 0.5rem; font-size: 0.875rem; cursor: pointer; display: inline-flex; align-items: center; gap: 0.5rem;">Save Test</button>
                            <button class="btn btn-primary" id="exportPdfBtn" style="background: #d97706; color: white; padding: 0.75rem 1.5rem; border: none; border-radius: 0.5rem; font-size: 0.875rem; cursor: pointer; display: inline-flex; align-items: center; gap: 0.5rem;">Export PDF</button>
                        </div>
                    </div>

                    <div class="exam-header" id="examHeader" style="display: none;">
                        <div class="exam-title" id="examTitle">EXAM TITLE</div>
                        <div class="exam-details">
                            <div>Subject: <strong id="examSubject">Subject</strong></div>
                            <div>Grade Level: <strong id="examGrade">Grade</strong></div>
                            <div>Total Marks: <strong id="instructionTotalMarks">0</strong></div>
                        </div>
                    </div>

                    <div class="instructions" id="instructions" style="display: none;">
                        <h3>Instructions</h3>
                        <ul>
                            <li>Answer all questions to the best of your ability</li>
                            <li>Read each question carefully before answering</li>
                            <li>Manage your time wisely</li>
                            <li>Check your answers before submitting</li>
                        </ul>
                    </div>

                    <div class="questions-container" id="questionsContainer">
                        <!-- Questions will be dynamically added here -->
                    </div>

                    <div class="navigation-controls">
                        <button class="btn btn-secondary" id="prevPage" style="background: #374151; color: #e1e1e1; padding: 0.75rem 1.5rem; border: 1px solid #4b5563; border-radius: 0.5rem; font-size: 0.875rem; cursor: pointer; display: inline-flex; align-items: center; gap: 0.5rem;">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <line x1="19" y1="12" x2="5" y2="12"></line>
                                <polyline points="12 19 5 12 12 5"></polyline>
                            </svg>
                            Previous
                        </button>
                        <button class="btn btn-primary" id="submitBtn" style="background: #d97706; color: white; padding: 0.75rem 1.5rem; border: none; border-radius: 0.5rem; font-size: 0.875rem; cursor: pointer; display: inline-flex; align-items: center; gap: 0.5rem;">Submit Test</button>
                        <button class="btn btn-secondary" id="nextPage" style="background: #374151; color: #e1e1e1; padding: 0.75rem 1.5rem; border: 1px solid #4b5563; border-radius: 0.5rem; font-size: 0.875rem; cursor: pointer; display: inline-flex; align-items: center; gap: 0.5rem;">
                            Next
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <line x1="5" y1="12" x2="19" y2="12"></line>
                                <polyline points="5 5 12 12 5 19"></polyline>
                            </svg>
                        </button>
                    </div>
                </div>
            </div>

            <!-- Results Screen -->
            <div id="resultsScreen" class="screen">
                <div class="results-container">
                    <div class="results-header">
                        <h1>Test Results</h1>
                        <div class="score-display">
                            <div class="score-circle">
                                <span class="score-number" id="percentage">0%</span>
                            </div>
                            <div class="score-details">
                                <div class="score-item">
                                    <span class="score-label">Your Score:</span>
                                    <span class="score-value" id="totalScore">0</span>
                                </div>
                                <div class="score-item">
                                    <span class="score-label">Total Marks:</span>
                                    <span class="score-value" id="maxScore">0</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="results-details" id="resultsDetails">
                        <!-- Results will be dynamically added here -->
                    </div>

                    <div class="results-actions">
                        <button class="btn btn-secondary" id="exportMarkSchemeBtn" style="background: #374151; color: #e1e1e1; padding: 0.75rem 1.5rem; border: 1px solid #4b5563; border-radius: 0.5rem; font-size: 0.875rem; cursor: pointer; display: inline-flex; align-items: center; gap: 0.5rem;">View Mark Scheme</button>
                        <button class="btn btn-primary" id="newTestBtn" style="background: #d97706; color: white; padding: 0.75rem 1.5rem; border: none; border-radius: 0.5rem; font-size: 0.875rem; cursor: pointer; display: inline-flex; align-items: center; gap: 0.5rem;">Create New Test</button>
                    </div>
                </div>
            </div>
        </main>

        <!-- Loading Overlay -->
        <div class="loading-overlay" id="loadingOverlay">
            <div class="loading-content">
                <div class="loading-spinner"></div>
                <p>Generating your test...</p>
            </div>
        </div>

        <!-- AI Assistant -->
        <div class="ai-assistant" id="aiAssistant">
            <div class="ai-header" id="aiAssistantHeader">
                <div class="ai-avatar">
                    <img src="../Assets/Images/Logo.png" alt="AI" class="ai-logo" style="object-fit: cover; width: 32px; height: 32px;">
                </div>
                <div class="ai-title">AI Helper</div>
                <button class="ai-minimize" id="aiAssistantMinimize">‚àí</button>
            </div>
            <div class="ai-body" id="aiAssistantBody">
                <div class="ai-chat" id="aiAssistantChat">
                    <div class="ai-welcome-message">
                        <div class="ai-message">
                            <div class="ai-message-content">
                                Hi! I'm your AI helper. Ask me about any question and I'll guide you step-by-step!
                            </div>
                        </div>
                    </div>
                </div>
                <div class="ai-input-container">
                    <input type="text" id="aiInput" placeholder="Ask about a question...">
                    <button class="ai-send-btn" id="aiSendBtn">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="22" y1="2" x2="11" y2="13"></line>
                            <polygon points="22 2 15 22 11 13 2 9 22 2"></polygon>
                        </svg>
                    </button>
                </div>
            </div>
        </div>

        <!-- Modals -->
        <div class="modal-overlay" id="modalOverlay"></div>
        
        <!-- AI Helper Modal -->
        <div class="modal" id="aiHelperModal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3><img src="../Assets/Images/Logo.png" alt="AI" style="width: 28px; height: 28px; margin-right: 8px; object-fit: contain;"> AI Helper</h3>
                    <button class="modal-close" id="closeAIHelperModal">&times;</button>
                </div>
                <div class="modal-body">
                    <div id="aiHelperContent">
                        <p>Click "Get Hint" to receive step-by-step guidance for this question.</p>
                    </div>
                    <div class="modal-actions">
                        <button class="btn btn-secondary" id="getHintBtn">Get Hint</button>
                        <button class="btn btn-secondary" id="nextStepBtn" style="display: none;">Next Step</button>
                        <button class="btn btn-secondary" id="resetHintBtn">Reset</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Drawing Modal -->
        <div class="modal" id="drawingModal">
            <div class="modal-content modal-large">
                <div class="modal-header">
                    <h3>Drawing Tool</h3>
                    <button class="modal-close" id="closeDrawingModal">&times;</button>
                </div>
                <div class="modal-body">
                    <div class="drawing-tools">
                        <div class="tool-group">
                            <button class="tool-btn active" data-tool="pen">‚úèÔ∏è Pen</button>
                            <button class="tool-btn" data-tool="eraser">üßπ Eraser</button>
                            <button class="tool-btn" data-tool="line">üìè Line</button>
                            <button class="tool-btn" data-tool="rectangle">‚¨ú Rectangle</button>
                            <button class="tool-btn" data-tool="circle">‚≠ï Circle</button>
                            <button class="tool-btn" data-tool="triangle">üî∫ Triangle</button>
                            <button class="tool-btn" data-tool="text">üìù Text</button>
                        </div>
                        <div class="tool-group">
                            <input type="color" id="colorPicker" value="#000000">
                            <input type="range" id="sizePicker" min="1" max="10" value="2">
                            <span id="sizeValue">2</span>
                            <input type="text" id="textInput" placeholder="Text" style="display: none;">
                        </div>
                        <div class="tool-group">
                            <button class="btn btn-secondary" id="undoDrawing">‚Ü∂ Undo</button>
                            <button class="btn btn-secondary" id="clearCanvas">üóëÔ∏è Clear</button>
                        </div>
                    </div>
                    <div class="drawing-canvas-container">
                        <canvas id="drawingCanvas" width="600" height="400"></canvas>
                    </div>
                </div>
                <div class="modal-actions">
                    <button class="btn btn-secondary" id="cancelDrawing">Cancel</button>
                    <button class="btn btn-primary" id="saveDrawing">Save Drawing</button>
                </div>
            </div>
        </div>

        <!-- Edit Questions Modal -->
        <div class="modal" id="editQuestionsModal">
            <div class="modal-content modal-large">
                <div class="modal-header">
                    <h3>Edit Questions</h3>
                    <button class="modal-close" id="closeEditQuestionsModal">&times;</button>
                </div>
                <div class="modal-body">
                    <div id="editQuestionsContainer">
                        <!-- Questions will be dynamically added here -->
                    </div>
                </div>
                <div class="modal-actions">
                    <button class="btn btn-secondary" id="cancelQuestionsBtn">Cancel</button>
                    <button class="btn btn-primary" id="saveQuestionsBtn">Save Changes</button>
                </div>
            </div>
        </div>

        <!-- Edit Marks Modal -->
        <div class="modal" id="editMarksModal">
            <div class="modal-content modal-large">
                <div class="modal-header">
                    <h3>Edit Marks</h3>
                    <button class="modal-close" id="closeEditMarksModal">&times;</button>
                </div>
                <div class="modal-body">
                    <div id="editMarksContainer">
                        <!-- Mark inputs will be dynamically added here -->
                    </div>
                </div>
                <div class="modal-actions">
                    <button class="btn btn-secondary" id="cancelMarksBtn">Cancel</button>
                    <button class="btn btn-primary" id="saveMarksBtn">Save Changes</button>
                </div>
            </div>
        </div>

        <!-- Hidden file inputs -->
        <input type="file" id="markSchemeFile" accept=".json" style="display: none;">
        <input type="file" id="testFile" accept=".json" style="display: none;">
    </div>

    <script src="script.js"></script>
</body>
</html>
                            <li>Interactive answer input</li>
                            <li>Automatic answer checking</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div id="testScreen" class="screen" style="display: none;">
                <div class="exam-header" id="examHeader">
                    <div class="exam-title" id="testTitle">Test Paper</div>
                    <div class="exam-details">
                        <div>Surname: <strong>_________________________</strong></div>
                        <div>Forename(s): <strong>_________________________</strong></div>
                    </div>
                    <div class="total-marks">Total Marks: <span id="totalMarks">0</span></div>
                </div>
                
                <div class="instructions" id="instructions">
                    <h3>Instructions</h3>
                    <ul>
                        <li>Answer all questions.</li>
                        <li>Write your answers in the spaces provided.</li>
                        <li>Show all your working out.</li>
                        <li>Calculators may be used.</li>
                        <li>Total marks for this paper: <span id="instructionTotalMarks">0</span></li>
                    </ul>
                </div>
                
                <div class="test-content">
                    <div id="questionsContainer"></div>
                </div>

                <div class="pagination">
                    <span>Page <span id="currentPage">1</span> of <span id="totalPages">5</span></span>
                    <div class="page-controls">
                        <button id="prevPage" disabled>Previous</button>
                        <button id="nextPage">Next</button>
                    </div>
                </div>

                <div class="test-actions">
                    <button id="exportPdfBtn">Export as PDF</button>
                    <button id="submitBtn">Submit Test</button>
                </div>
            </div>

            <div id="resultsScreen" class="screen" style="display: none;">
                <div class="results-content">
                    <h2>Test Results</h2>
                    <div class="score-summary">
                        <p>Total Score: <span id="totalScore">0</span> / <span id="maxScore">0</span></p>
                        <p>Percentage: <span id="percentage">0</span>%</p>
                    </div>
                    <div class="results-actions">
                        <button id="editQuestionsBtn">Edit Questions</button>
                        <button id="editMarksBtn">Edit Marks</button>
                    </div>
                    <div id="resultsDetails"></div>
                    <div class="test-actions">
                        <button id="newTestBtn">New Test</button>
                    </div>
                </div>
            </div>
        </main>

        <!-- Edit Questions Modal -->
        <div id="editQuestionsModal" class="modal" style="display: none;">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>Edit Questions</h3>
                    <button class="close-btn" id="closeEditQuestionsModal">&times;</button>
                </div>
                <div class="modal-body">
                    <div id="editQuestionsContainer"></div>
                </div>
                <div class="modal-footer">
                    <button id="saveQuestionsBtn">Save Changes</button>
                    <button id="cancelQuestionsBtn">Cancel</button>
                </div>
            </div>
        </div>

        <!-- Edit Marks Modal -->
        <div id="editMarksModal" class="modal" style="display: none;">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>Edit Marks</h3>
                    <button class="close-btn" id="closeEditMarksModal">&times;</button>
                </div>
                <div class="modal-body">
                    <div id="editMarksContainer"></div>
                </div>
                <div class="modal-footer">
                    <button id="saveMarksBtn">Save Changes</button>
                    <button id="cancelMarksBtn">Cancel</button>
                </div>
            </div>
        </div>

        <!-- Drawing Tools Modal -->
        <div id="drawingModal" class="modal" style="display: none;">
            <div class="modal-content" style="max-width: 900px;">
                <div class="modal-header">
                    <h3>Drawing Tools</h3>
                    <button class="close-btn" id="closeDrawingModal">&times;</button>
                </div>
                <div class="modal-body">
                    <div class="drawing-toolbar">
                        <div class="tool-group">
                            <button class="tool-btn active" data-tool="pen">‚úèÔ∏è Pen</button>
                            <button class="tool-btn" data-tool="line">üìè Line</button>
                            <button class="tool-btn" data-tool="rectangle">‚ñ≠ Rectangle</button>
                            <button class="tool-btn" data-tool="circle">‚óã Circle</button>
                            <button class="tool-btn" data-tool="triangle">‚ñ≥ Triangle</button>
                            <button class="tool-btn" data-tool="text">üìù Text</button>
                            <button class="tool-btn" data-tool="eraser">üßπ Eraser</button>
                        </div>
                        <div class="tool-group">
                            <label>Color:</label>
                            <input type="color" id="colorPicker" value="#000000">
                            <label>Size:</label>
                            <input type="range" id="sizePicker" min="1" max="10" value="2">
                            <span id="sizeValue">2</span>
                        </div>
                        <div class="tool-group">
                            <input type="text" id="textInput" placeholder="Enter text..." style="display: none; padding: 5px; border: 1px solid #000; margin-left: 10px;">
                            <button id="clearCanvas">Clear All</button>
                            <button id="undoDrawing">Undo</button>
                        </div>
                    </div>
                    <div class="canvas-container">
                        <canvas id="drawingCanvas" width="800" height="400"></canvas>
                    </div>
                </div>
                <div class="modal-footer">
                    <button id="saveDrawing">Save Drawing</button>
                    <button id="cancelDrawing">Cancel</button>
                </div>
            </div>
        </div>

        <!-- AI Helper Modal -->
        <div id="aiHelperModal" class="modal" style="display: none;">
            <div class="modal-content">
                <div class="modal-header">
                    <h3><img src="../Assets/Images/Logo.png" alt="AI" style="width: 20px; height: 20px; margin-right: 8px;"> AI Helper</h3>
                    <button class="close-btn" id="closeAIHelperModal">&times;</button>
                </div>
                <div class="modal-body">
                    <div id="aiHelperContent">
                        <p>Click "Get Hint" to receive step-by-step guidance for this question.</p>
                    </div>
                    <div class="ai-helper-controls">
                        <button id="getHintBtn">Get Hint</button>
                        <button id="nextStepBtn" style="display: none;">Next Step</button>
                        <button id="resetHintBtn">Reset</button>
                    </div>
                </div>
                <div class="modal-footer">
                    <button id="saveHintBtn">Save Hint</button>
                    <button id="cancelHintBtn">Cancel</button>
                </div>
            </div>
        </div>

        <!-- AI Assistant Widget -->
        <div id="aiAssistant" class="ai-assistant">
            <div class="ai-assistant-header" id="aiAssistantHeader">
                <div class="ai-assistant-icon"><img src="../Assets/Images/Logo.png" alt="AI" style="width: 18px; height: 18px;"></div>
                <div class="ai-assistant-title">AI Helper</div>
                <div class="ai-assistant-minimize" id="aiAssistantMinimize">‚àí</div>
            </div>
            <div class="ai-assistant-body" id="aiAssistantBody">
                <div class="ai-assistant-chat" id="aiAssistantChat">
                    <div class="ai-welcome-message">
                        <div class="ai-message">
                            <div class="ai-message-content">
                                Hi! I'm your AI helper. I can guide you through any question step-by-step without giving away the answer. Just tell me which question you need help with!
                            </div>
                        </div>
                    </div>
                </div>
                <div class="ai-assistant-input">
                    <input type="text" id="aiInput" placeholder="Ask about a question (e.g., 'help with question 3')">
                    <button id="aiSendBtn">Send</button>
                </div>
            </div>
        </div>

        <div id="loadingOverlay" class="loading-overlay" style="display: none;">
            <div class="loading-spinner"></div>
            <p>Generating test...</p>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
